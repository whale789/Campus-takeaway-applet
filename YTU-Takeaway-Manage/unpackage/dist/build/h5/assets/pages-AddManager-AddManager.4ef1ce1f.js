import{D as e,u as t,x as l,o as s,a as r,d as a,w as o,F as n,f as i,e as m,t as d,c as u,h as w,j as p,l as N}from"./index-745be673.js";import{_ as f,a as y}from"./uni-popup-message.9bf2ed06.js";import{r as c}from"./uni-app.es.4a269a07.js";import{a as h}from"./uni-popup.6e285b20.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";const S=g({data:()=>({NewAccount:0,NewName:"",NewWorkNumber:"",NewSecretQuestion:"",NewAnswer:"",NewPassword:"",NewConfirmPsd:"",NewNameEmpty:!1,NewWorkNumberEmpty:!1,NewSecretQuestionEmpty:!1,NewSecretAnswerEmpty:!1,IFNewPasswordEmpty:!1,IFConfirmPsaawordEmpty:!1,IFPsdNotSame:!1,timer:null}),onLoad(){e.callFunction({name:"GetAllManagers"}).then((e=>{var t;for(console.log(e),t=0;t<e.result.data.length;t++)e.result.data[t].Account>this.NewAccount&&(this.NewAccount=e.result.data[t].Account);this.NewAccount=this.NewAccount+1}))},onHide(){clearInterval(this.timer),this.timer=null},methods:{SendWorkNumber(){""==this.NewWorkNumber?this.NewWorkNumberEmpty=!0:this.NewWorkNumberEmpty=!1},SendName(){""==this.NewName?this.NewNameEmpty=!0:this.NewNameEmpty=!1},SendSecretQuestion(){""==this.NewSecretQuestion?this.NewSecretQuestionEmpty=!0:this.NewSecretQuestionEmpty=!1},SendAnswer(){""==this.NewAnswer?this.NewSecretAnswerEmpty=!0:this.NewSecretAnswerEmpty=!1},SendNewPsd(){""==this.NewPassword?this.IFNewPasswordEmpty=!0:this.IFNewPasswordEmpty=!1},CheckNewPsd(){""==this.NewConfirmPsd?this.IFConfirmPsaawordEmpty=!0:(this.IFConfirmPsaawordEmpty=!1,this.NewPassword!=this.NewConfirmPsd?this.IFPsdNotSame=!0:this.IFPsdNotSame=!1)},SubmitNewMag(){if(0==this.NewNameEmpty&&0==this.NewWorkNumberEmpty&&0==this.NewSecretQuestionEmpty&&0==this.NewSecretAnswerEmpty&&0==this.IFNewPasswordEmpty&&0==this.IFConfirmPsaawordEmpty&&0==this.IFPsdNotSame){let r=new Date,a=r.getFullYear(),o=r.getMonth()+1,n=r.getDate();o>=1&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n);var s=a+"-"+o+"-"+n;e.callFunction({name:"AddNewManager",data:{Account:this.NewAccount,PassWord:this.NewPassword,name:this.NewName,EmployeeNumber:this.NewWorkNumber,WorkWithHistory:[],AccountState:1,LoginState:0,SecretQuestion:this.NewSecretQuestion,SecretAnswer:this.NewAnswer,RegistrationTime:s}}).then((e=>{t({title:"增设成功",duration:1500}),this.timer=setInterval((function(){l({url:"/pages/Personal/Personal"})}),1500)}))}else this.$refs.message.open()}}},[["render",function(e,t,l,g,S,_){const P=i,E=c(p("uni-easyinput"),f),A=N,k=c(p("uni-popup-message"),y),x=c(p("uni-popup"),h);return s(),r(n,null,[a(P,null,{default:o((()=>[a(P,{style:{display:"flex","margin-top":"5%","margin-left":"14.5%"}},{default:o((()=>[a(P,{style:{}},{default:o((()=>[m("账号：")])),_:1}),a(P,null,{default:o((()=>[m(d(S.NewAccount),1)])),_:1})])),_:1}),a(P,{style:{display:"flex","flex-direction":"row","justify-content":"center","margin-top":"6%"}},{default:o((()=>[a(P,{style:{"margin-top":"1.5%"}},{default:o((()=>[m("工号：")])),_:1}),a(P,{style:{width:"60%"}},{default:o((()=>[a(E,{placeholder:"请输入职工号",trim:"all",modelValue:S.NewWorkNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>S.NewWorkNumber=e),onBlur:_.SendWorkNumber,type:"number"},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.NewWorkNumberEmpty?(s(),u(P,{key:0,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("工号不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","flex-direction":"row","justify-content":"center","margin-top":"6%"}},{default:o((()=>[a(P,{style:{"margin-top":"1.5%"}},{default:o((()=>[m("姓名：")])),_:1}),a(P,{style:{width:"60%"}},{default:o((()=>[a(E,{placeholder:"请输入您的真实姓名",trim:"all",modelValue:S.NewName,"onUpdate:modelValue":t[1]||(t[1]=e=>S.NewName=e),onBlur:_.SendName},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.NewNameEmpty?(s(),u(P,{key:1,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("姓名不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","margin-left":"6.5%","margin-top":"6%"}},{default:o((()=>[a(P,null,{default:o((()=>[m("密保问题：")])),_:1}),a(P,{style:{width:"60%"}},{default:o((()=>[a(E,{placeholder:"请输入您的密保问题",trim:"all",modelValue:S.NewSecretQuestion,"onUpdate:modelValue":t[2]||(t[2]=e=>S.NewSecretQuestion=e),onBlur:_.SendSecretQuestion},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.NewSecretQuestionEmpty?(s(),u(P,{key:2,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("密保问题不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","margin-left":"6.5%","margin-top":"6%"}},{default:o((()=>[a(P,{style:{"margin-top":"1.5%"}},{default:o((()=>[m("密保答案：")])),_:1}),a(P,{style:{width:"64%"}},{default:o((()=>[a(E,{placeholder:"请输入密保问题的答案",trim:"all",modelValue:S.NewAnswer,"onUpdate:modelValue":t[3]||(t[3]=e=>S.NewAnswer=e),onBlur:_.SendAnswer},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.NewSecretAnswerEmpty?(s(),u(P,{key:3,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("密保问题答案不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","flex-direction":"row","justify-content":"center","margin-top":"6%"}},{default:o((()=>[a(P,{style:{"margin-top":"1.5%"}},{default:o((()=>[m("密码：")])),_:1}),a(P,{style:{width:"60%"}},{default:o((()=>[a(E,{placeholder:"请输入新密码",trim:"all",modelValue:S.NewPassword,"onUpdate:modelValue":t[4]||(t[4]=e=>S.NewPassword=e),onBlur:_.SendNewPsd,type:"password"},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.IFNewPasswordEmpty?(s(),u(P,{key:4,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("新密码不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","margin-left":"6.5%","margin-top":"6%"}},{default:o((()=>[a(P,{style:{"margin-top":"1.5%"}},{default:o((()=>[m("确认密码：")])),_:1}),a(P,{style:{width:"64%"}},{default:o((()=>[a(E,{placeholder:"请再次输入密码",trim:"all",modelValue:S.NewConfirmPsd,"onUpdate:modelValue":t[5]||(t[5]=e=>S.NewConfirmPsd=e),onBlur:_.CheckNewPsd,type:"password"},null,8,["modelValue","onBlur"])])),_:1})])),_:1}),S.IFPsdNotSame?(s(),u(P,{key:5,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("两次输入的密码不同")])),_:1})):w("",!0),S.IFConfirmPsaawordEmpty?(s(),u(P,{key:6,style:{color:"red","font-size":"20rpx","margin-left":"27%"}},{default:o((()=>[m("新密码不能为空")])),_:1})):w("",!0),a(P,{style:{display:"flex","flex-direction":"row","justify-content":"center","margin-top":"10%"}},{default:o((()=>[a(A,{style:{width:"40%"},type:"primary",onClick:_.SubmitNewMag},{default:o((()=>[m("提交")])),_:1},8,["onClick"])])),_:1})])),_:1}),a(x,{ref:"message",type:"message"},{default:o((()=>[a(k,{type:"error",message:"请先按要求填写内容",duration:2e3})])),_:1},512)],64)}]]);export{S as default};
