import{s as e,o as t,c as o,w as l,d as i,n as a,e as n,t as r,p as d,i as s,f as p,I as u,D as c,g as f,m as g,u as h,a as x,F as y,k as m,j as b}from"./index-745be673.js";import{p as _,_ as w,a as k}from"./uni-popup.6e285b20.js";import{r as C}from"./uni-app.es.4a269a07.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const z={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},{t:A}=e(z);const L=T({name:"uniPopupDialog",mixins:[_],emits:["confirm","close"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:()=>({dialogType:"error",focus:!1,val:""}),computed:{okText(){return this.confirmText||A("uni-popup.ok")},closeText(){return this.cancelText||A("uni-popup.cancel")},placeholderText(){return this.placeholder||A("uni-popup.placeholder")},titleText(){return this.title||A("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){this.val=e}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(e,c,f,g,h,x){const y=s,m=p,b=u;return t(),o(m,{class:"uni-popup-dialog"},{default:l((()=>[i(m,{class:"uni-dialog-title"},{default:l((()=>[i(y,{class:a(["uni-dialog-title-text",["uni-popup__"+h.dialogType]])},{default:l((()=>[n(r(x.titleText),1)])),_:1},8,["class"])])),_:1}),"base"===f.mode?(t(),o(m,{key:0,class:"uni-dialog-content"},{default:l((()=>[d(e.$slots,"default",{},(()=>[i(y,{class:"uni-dialog-content-text"},{default:l((()=>[n(r(f.content),1)])),_:1})]),!0)])),_:3})):(t(),o(m,{key:1,class:"uni-dialog-content"},{default:l((()=>[d(e.$slots,"default",{},(()=>[i(b,{class:"uni-dialog-input",modelValue:h.val,"onUpdate:modelValue":c[0]||(c[0]=e=>h.val=e),type:"text",placeholder:x.placeholderText,focus:h.focus},null,8,["modelValue","placeholder","focus"])]),!0)])),_:3})),i(m,{class:"uni-dialog-button-group"},{default:l((()=>[i(m,{class:"uni-dialog-button",onClick:x.closeDialog},{default:l((()=>[i(y,{class:"uni-dialog-button-text"},{default:l((()=>[n(r(x.closeText),1)])),_:1})])),_:1},8,["onClick"]),i(m,{class:"uni-dialog-button uni-border-left",onClick:x.onOk},{default:l((()=>[i(y,{class:"uni-dialog-button-text uni-button-color"},{default:l((()=>[n(r(x.okText),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:3})}],["__scopeId","data-v-d19f9ee6"]]),S="/assets/PersonalAvatar-2f912cce.jpg";const M=T({data:()=>({WorkingDays:125,ProcessingNumber:52,Logged:!1,ManagerName:"",ManagerWorkNumber:"",Account:0,SecretQuestion:"",SecretAnswer:""}),onShow(){var e=2640055850001;this.Account=e,this.Logged=!0,c.callFunction({name:"GetManagerMsg",data:{Account:e}}).then((e=>{console.log(e);let t=new Date,o=new Date(Date.parse(e.result.data[0].RegistrationTime.replace(/-/g,"/"))),l=parseInt(Math.abs(t.getTime()-o.getTime())/1e3/60/60/24);this.ManagerName=e.result.data[0].name,this.ManagerWorkNumber=e.result.data[0].EmployeeNumber,this.WorkingDays=l+1,this.SecretQuestion=e.result.data[0].SecretQuestion;var i=0;c.callFunction({name:"GetAuditsByAccount",data:{Account:this.Account}}).then((e=>{i+=e.result.data.length,c.callFunction({name:"GetPunishByAccount",data:{Account:this.Account}}).then((e=>{i+=e.result.data.length,this.ProcessingNumber=i}))}))}))},onReady(){},methods:{Login(){f({url:"/pages/ManagerLogin/ManagerLogin"})},LoginOut(){c.callFunction({name:"UpdateLoginState",data:{Account:this.Account,State:0}}).then((e=>{this.Logged=!1,g().globalData.Account=0}))},CancelAccount(){this.$refs.cancellation.open()},SureCancel(){c.callFunction({name:"UpdateAccountState",data:{Account:this.Account,State:0}}).then((e=>{h({title:"注销成功"}),this.LoginOut()}))},AddNewManager(){f({url:"/pages/AddManager/AddManager"})},GoToHistory(){f({url:"/pages/History/History"})},GoToPunish(){f({url:"/pages/PunishList/PunishList"})}}},[["render",function(e,a,d,s,u,c){const f=p,g=m,h=C(b("uni-icons"),w),_=C(b("uni-popup-dialog"),L),T=C(b("uni-popup"),k);return t(),x(y,null,[u.Logged?(t(),o(f,{key:0},{default:l((()=>[i(f,{style:{"background-color":"#0099FF"}},{default:l((()=>[i(f,{style:{height:"30rpx"}}),i(f,{style:{display:"flex","margin-left":"5%"}},{default:l((()=>[i(g,{style:{width:"120rpx",height:"120rpx","border-radius":"50%",border:"1px solid black"},src:S}),i(f,{style:{"flex-direction":"row","margin-top":"6rpx","margin-left":"5%"}},{default:l((()=>[i(f,{style:{height:"30px",width:"100%","font-weight":"bold","font-size":"18px","margin-top":"2%","margin-left":"3%"}},{default:l((()=>[n(r(u.ManagerName),1)])),_:1}),i(f,{style:{"margin-left":"3%","font-size":"15px",display:"flex","margin-top":"5rpx"}},{default:l((()=>[n(r(u.ManagerWorkNumber),1)])),_:1}),i(f,{style:{height:"30rpx"}})])),_:1})])),_:1})])),_:1}),i(f,{style:{display:"flex",width:"100%","margin-top":"10%"}},{default:l((()=>[i(f,{style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{onClick:c.GoToHistory,style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{display:"flex","flex-direction":"row","justify-content":"center",height:"90rpx"}},{default:l((()=>[i(h,{type:"download-filled",size:"50",color:"#a2a2a2"})])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("历史处理")])),_:1}),i(f,{style:{height:"10rpx"}})])),_:1},8,["onClick"])])),_:1}),i(f,{style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{"text-align":"center","font-size":"35rpx",height:"90rpx","line-height":"100rpx"}},{default:l((()=>[n(r(u.WorkingDays),1)])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("工作天数")])),_:1})])),_:1})])),_:1}),i(f,{style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{"text-align":"center","font-size":"35rpx",height:"90rpx","line-height":"100rpx"}},{default:l((()=>[n(r(u.ProcessingNumber),1)])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("处理个数")])),_:1})])),_:1})])),_:1})])),_:1}),i(f,{style:{"margin-top":"10%"}},{default:l((()=>[i(f,{onClick:c.AddNewManager,style:{width:"100%","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede",height:"100rpx",display:"flex"}},{default:l((()=>[i(f,{style:{"margin-left":"5%","font-size":"35rpx","line-height":"100rpx",width:"80%"}},{default:l((()=>[n(" 增设管理员 ")])),_:1}),i(f,{style:{width:"10%","margin-top":"3.5%"}},{default:l((()=>[i(h,{type:"forward",size:"15",color:"#9d9d9d"})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.GoToPunish,style:{width:"100%","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede",height:"100rpx",display:"flex"}},{default:l((()=>[i(f,{style:{"margin-left":"5%","font-size":"35rpx","line-height":"100rpx",width:"80%"}},{default:l((()=>[n(" 历史处罚记录 ")])),_:1}),i(f,{style:{width:"10%","margin-top":"3.5%"}},{default:l((()=>[i(h,{type:"forward",size:"15",color:"#9d9d9d"})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.CancelAccount,style:{width:"100%","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede",height:"100rpx",display:"flex"}},{default:l((()=>[i(f,{style:{"margin-left":"5%","font-size":"35rpx","line-height":"100rpx",width:"80%"}},{default:l((()=>[n(" 注销账号 ")])),_:1}),i(f,{style:{width:"10%","margin-top":"3.5%"}},{default:l((()=>[i(h,{type:"forward",size:"15",color:"#9d9d9d"})])),_:1})])),_:1},8,["onClick"]),i(f,{style:{color:"red","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede","text-align":"center","font-size":"35rpx",height:"100rpx","line-height":"100rpx","margin-top":"50%"},onClick:c.LoginOut},{default:l((()=>[n("退出登录")])),_:1},8,["onClick"])])),_:1})])),_:1})):(t(),o(f,{key:1},{default:l((()=>[i(f,{style:{"background-color":"#0099FF"}},{default:l((()=>[i(f,{style:{height:"30rpx"}}),i(f,{style:{display:"flex","margin-left":"5%"}},{default:l((()=>[i(g,{style:{width:"120rpx",height:"120rpx","border-radius":"50%",border:"1px solid black"},src:S}),i(f,{style:{"flex-direction":"row","margin-top":"6rpx","margin-left":"5%"}},{default:l((()=>[i(f,{style:{"font-size":"18px",height:"30px",width:"100%","font-weight":"bold","margin-top":"20%","margin-left":"3%"},onClick:c.Login},{default:l((()=>[n(" 请您先登录 ")])),_:1},8,["onClick"]),i(f,{style:{height:"30rpx"}})])),_:1})])),_:1})])),_:1}),i(f,{style:{display:"flex",width:"100%","margin-top":"10%"}},{default:l((()=>[i(f,{onClick:c.Login,style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{display:"flex","flex-direction":"row","justify-content":"center",height:"90rpx"}},{default:l((()=>[i(h,{type:"download-filled",size:"50",color:"#a2a2a2"})])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("历史处理")])),_:1}),i(f,{style:{height:"10rpx"}})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.Login,style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{"text-align":"center","font-size":"35rpx",height:"90rpx","line-height":"100rpx"}},{default:l((()=>[n("*****")])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("工作天数")])),_:1})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.Login,style:{width:"33.33%",display:"flex","flex-direction":"row","justify-content":"center"}},{default:l((()=>[i(f,{style:{width:"60%","background-color":"#efeff4","border-radius":"5rpx","box-shadow":"1px 1px 2px 2px rgba(0, 0, 0.1, 0.1)"}},{default:l((()=>[i(f,{style:{"text-align":"center","font-size":"35rpx",height:"90rpx","line-height":"100rpx"}},{default:l((()=>[n("*****")])),_:1}),i(f,{style:{"text-align":"center",color:"gray","font-size":"25rpx"}},{default:l((()=>[n("处理个数")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),i(f,{style:{"margin-top":"10%"}},{default:l((()=>[i(f,{onClick:c.Login,style:{width:"100%","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede",height:"100rpx",display:"flex"}},{default:l((()=>[i(f,{style:{"margin-left":"5%","font-size":"35rpx","line-height":"100rpx",width:"80%",color:"#cacace"}},{default:l((()=>[n(" 增设管理员 ")])),_:1}),i(f,{style:{width:"10%","margin-top":"3.5%"}},{default:l((()=>[i(h,{type:"forward",size:"15",color:"#9d9d9d"})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.Login,style:{width:"100%","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede",height:"100rpx",display:"flex"}},{default:l((()=>[i(f,{style:{"margin-left":"5%","font-size":"35rpx","line-height":"100rpx",width:"80%",color:"#cacace"}},{default:l((()=>[n(" 注销账号 ")])),_:1}),i(f,{style:{width:"10%","margin-top":"3.5%"}},{default:l((()=>[i(h,{type:"forward",size:"15",color:"#9d9d9d"})])),_:1})])),_:1},8,["onClick"]),i(f,{onClick:c.Login,style:{color:"#cacace","border-bottom":"1px solid #dedede","border-top":"1px solid #dedede","text-align":"center","font-size":"35rpx",height:"100rpx","line-height":"100rpx","margin-top":"50%"}},{default:l((()=>[n("退出登录")])),_:1},8,["onClick"])])),_:1})])),_:1})),i(T,{ref:"cancellation",type:"dialog"},{default:l((()=>[i(_,{type:"error",cancelText:"关闭",confirmText:"确定",title:"警告",content:"您确定注销该账号吗",onConfirm:c.SureCancel},null,8,["onConfirm"])])),_:1},512)],64)}]]);export{M as default};
